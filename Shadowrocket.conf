# =========================================
# sliu's config - Shadowrocket Edition
# DNSåˆ†æµ + AIéš”ç¦» + æµåª’ä½“éš”ç¦» + ç”µç«ä¼˜åŒ–
# =========================================

[General]
bypass-system = true
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com
tun-excluded-routes = 10.0.0.0/8,100.64.0.0/10,172.16.0.0/12,192.168.0.0/16
dns-server = 223.5.5.5,119.29.29.29,8.8.8.8,1.1.1.1
ipv6 = false
prefer-ipv6 = false
dns-fallback-system = false
dns-direct-system = false
icmp-auto-reply = true
always-reject-url-rewrite = false
private-ip-answer = true
update-url = https://raw.githubusercontent.com/xchenliu/shadowrocket-config/master/Shadowrocket.conf

# =====================================
# ç­–ç•¥ç»„ï¼ˆå¿…é¡»åœ¨ Rule ä¹‹å‰å®šä¹‰ï¼‰
# =====================================

[Proxy Group]

# åœ°åŒºèŠ‚ç‚¹
US = select,policy-regex-filter=(?i)(US|ç¾å›½|ç¾|ğŸ‡ºğŸ‡¸|States|American),interval=600,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
HK = select,policy-regex-filter=(?i)(HK|é¦™æ¸¯|æ¸¯|ğŸ‡­ğŸ‡°|Hong),interval=600,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
JP = select,policy-regex-filter=(?i)(JP|æ—¥æœ¬|æ—¥|ğŸ‡¯ğŸ‡µ|Japan),interval=600,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
SG = select,policy-regex-filter=(?i)(SG|æ–°åŠ å¡|ğŸ‡¸ğŸ‡¬|Singapore),interval=600,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
TW = select,policy-regex-filter=(?i)(TW|å°æ¹¾|å°|ğŸ‡¹ğŸ‡¼|Taiwan),interval=600,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204

# è‡ªåŠ¨æµ‹é€Ÿ
Auto = url-test,url=http://cp.cloudflare.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=.*
Asia-LowLatency = url-test,url=http://cp.cloudflare.com/generate_204,interval=300,tolerance=50,timeout=5,policy-regex-filter=(?i)(HK|JP|SG|é¦™æ¸¯|æ—¥æœ¬|æ–°åŠ å¡)

# æ—¥å¸¸å‡ºå£
Global = select,Auto,US,HK,JP,SG,TW,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204

# Googleï¼ˆé»˜è®¤é¦™æ¸¯ï¼‰
Google = select,HK,US,JP,SG,TW,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204

# AI â€” é»˜è®¤æ–°åŠ å¡ï¼ˆChatGPT / DeepSeek / Perplexity / Copilotï¼‰
AI-SG = select,SG,US,HK,JP,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
# AI â€” é»˜è®¤ç¾å›½ï¼ˆGemini / Grokï¼‰
AI-US = select,US,SG,HK,JP,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
# AI API è°ƒç”¨ï¼ˆOpenAI APIï¼Œé»˜è®¤æ–°åŠ å¡ï¼‰
AI-API = select,SG,US,HK,JP,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
# Claudeï¼ˆé»˜è®¤æ–°åŠ å¡ï¼‰
Claude = select,SG,US,HK,JP,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204

# æµåª’ä½“ï¼ˆé»˜è®¤ç¾å›½ï¼‰
Media = select,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
YouTube = select,Media,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
Netflix = select,Media,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
Spotify = select,Global,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204

# å¸¸ç”¨æœåŠ¡
Telegram = select,Global,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
WhatsApp = select,Global,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
Apple = select,DIRECT,Global,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
Microsoft = select,DIRECT,Global,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204

# ç¤¾äº¤å¹³å°
Twitter = select,Global,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
Facebook = select,Global,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
Instagram = select,Global,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
Reddit = select,Global,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204

# å¼€å‘/é€šè®¯
Discord = select,Global,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204
GitHub = select,Global,US,HK,JP,SG,DIRECT,interval=86400,timeout=5,select=0,url=http://cp.cloudflare.com/generate_204

# =====================================
# è§„åˆ™
# =====================================

[Rule]

# ---- 1) å¹¿å‘Š/éšç§ï¼ˆå…ˆæ‹¦æˆªï¼‰----
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Advertising/Advertising.list,REJECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Privacy/Privacy.list,REJECT

# ---- 2) WhatsAppï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰----
DOMAIN-SUFFIX,whatsapp.com,WhatsApp
DOMAIN-SUFFIX,whatsapp.net,WhatsApp
DOMAIN-SUFFIX,whatsapp.biz,WhatsApp
DOMAIN-SUFFIX,wa.me,WhatsApp
DOMAIN-KEYWORD,whatsapp,WhatsApp
IP-CIDR,158.85.224.160/27,WhatsApp,no-resolve
IP-CIDR,158.85.46.128/27,WhatsApp,no-resolve
IP-CIDR,158.85.5.192/27,WhatsApp,no-resolve
IP-CIDR,173.192.222.160/27,WhatsApp,no-resolve
IP-CIDR,173.192.231.32/27,WhatsApp,no-resolve
IP-CIDR,18.194.0.0/15,WhatsApp,no-resolve
IP-CIDR,184.173.128.0/17,WhatsApp,no-resolve
IP-CIDR,208.43.122.128/27,WhatsApp,no-resolve
IP-CIDR,34.224.0.0/12,WhatsApp,no-resolve
IP-CIDR,50.22.198.204/30,WhatsApp,no-resolve
IP-CIDR,54.242.0.0/15,WhatsApp,no-resolve

# ---- 3) OpenAI / ChatGPTï¼ˆé»˜è®¤æ–°åŠ å¡ â†’ AI-SGï¼‰----
DOMAIN,api.openai.com,AI-API
DOMAIN-SUFFIX,openaiapi.com,AI-API
DOMAIN-SUFFIX,openai.com,AI-SG
DOMAIN-SUFFIX,chatgpt.com,AI-SG
DOMAIN-SUFFIX,oaistatic.com,AI-SG
DOMAIN-SUFFIX,oaiusercontent.com,AI-SG

# ---- 4) Geminiï¼ˆé»˜è®¤ç¾å›½ â†’ AI-USï¼‰----
DOMAIN,gemini.google.com,AI-US
DOMAIN,generativelanguage.googleapis.com,AI-US
DOMAIN-SUFFIX,ai.google.dev,AI-US
DOMAIN-SUFFIX,proactivebackend-pa.googleapis.com,AI-US
DOMAIN-KEYWORD,proactivebackend,AI-US

# ---- 5) Claudeï¼ˆé»˜è®¤æ–°åŠ å¡ï¼‰----
DOMAIN-SUFFIX,claude.ai,Claude
DOMAIN-SUFFIX,anthropic.com,Claude
DOMAIN-SUFFIX,anthropic.ai,Claude

# ---- 6) Grokï¼ˆé»˜è®¤ç¾å›½ â†’ AI-USï¼‰----
DOMAIN-SUFFIX,x.ai,AI-US
DOMAIN-SUFFIX,grok.com,AI-US

# ---- 7) DeepSeek / Perplexity / Copilotï¼ˆé»˜è®¤æ–°åŠ å¡ â†’ AI-SGï¼‰----
DOMAIN-SUFFIX,deepseek.com,AI-SG
DOMAIN-KEYWORD,deepseek,AI-SG
DOMAIN-SUFFIX,perplexity.ai,AI-SG
DOMAIN-KEYWORD,perplexity,AI-SG
DOMAIN,copilot.microsoft.com,AI-SG
DOMAIN-SUFFIX,copilot.cloud.microsoft,AI-SG

# ---- 8) YouTubeï¼ˆé˜²æ­¢è¢« Google æŠ¢èµ°ï¼‰----
DOMAIN-SUFFIX,youtube.com,YouTube
DOMAIN-SUFFIX,googlevideo.com,YouTube
DOMAIN-SUFFIX,ytimg.com,YouTube

# ---- 9) æµåª’ä½“è¿œç¨‹è§„åˆ™ ----
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/YouTube/YouTube.list,YouTube
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Netflix/Netflix.list,Netflix
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Spotify/Spotify.list,Spotify
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GlobalMedia/GlobalMedia.list,Media

# ---- 10) ç¤¾äº¤å¹³å°æœ¬åœ°é˜²æŠ¢ ----
DOMAIN-SUFFIX,twitter.com,Twitter
DOMAIN-SUFFIX,x.com,Twitter
DOMAIN-SUFFIX,twimg.com,Twitter
DOMAIN-SUFFIX,t.co,Twitter

DOMAIN-SUFFIX,facebook.com,Facebook
DOMAIN-SUFFIX,fbcdn.net,Facebook
DOMAIN-SUFFIX,fb.me,Facebook
DOMAIN-SUFFIX,facebook.net,Facebook

DOMAIN-SUFFIX,instagram.com,Instagram
DOMAIN-SUFFIX,cdninstagram.com,Instagram
DOMAIN-SUFFIX,instagr.am,Instagram

DOMAIN-SUFFIX,reddit.com,Reddit
DOMAIN-SUFFIX,redd.it,Reddit
DOMAIN-SUFFIX,redditmedia.com,Reddit
DOMAIN-SUFFIX,redditstatic.com,Reddit

# ---- 11) å¼€å‘/é€šè®¯ ----
DOMAIN-SUFFIX,discord.com,Discord
DOMAIN-SUFFIX,discord.gg,Discord
DOMAIN-SUFFIX,discordapp.com,Discord
DOMAIN-SUFFIX,discordapp.net,Discord
DOMAIN-SUFFIX,discord.media,Discord

DOMAIN-SUFFIX,github.com,GitHub
DOMAIN-SUFFIX,github.io,GitHub
DOMAIN-SUFFIX,githubusercontent.com,GitHub
DOMAIN-SUFFIX,githubassets.com,GitHub

# ---- 12) Spotify æœ¬åœ°é˜²æŠ¢ ----
DOMAIN-SUFFIX,spotify.com,Spotify
DOMAIN-SUFFIX,scdn.co,Spotify
DOMAIN-SUFFIX,spotifycdn.com,Spotify
DOMAIN-SUFFIX,spotify.design,Spotify

# ---- 13) ç”µç«ä¼˜åŒ– ----
DOMAIN-SUFFIX,steamcontent.com,Asia-LowLatency
DOMAIN-SUFFIX,steampowered.com,Asia-LowLatency
DOMAIN-SUFFIX,riotgames.com,Asia-LowLatency

# ---- 14) Apple Private Relay ----
DOMAIN-SUFFIX,mask.icloud.com,DIRECT
DOMAIN-SUFFIX,mask-h2.icloud.com,DIRECT

# ---- 15) æœåŠ¡è¿œç¨‹è§„åˆ™ ----
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Telegram/Telegram.list,Telegram
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Twitter/Twitter.list,Twitter
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Facebook/Facebook.list,Facebook
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Instagram/Instagram.list,Instagram
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Reddit/Reddit.list,Reddit
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Discord/Discord.list,Discord
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GitHub/GitHub.list,GitHub

# ---- 16) æœåŠ¡ ----
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Apple/Apple.list,Apple
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Microsoft/Microsoft.list,Microsoft

# ---- 17) Google å…œåº• ----
DOMAIN-SUFFIX,google.com,Google
DOMAIN-SUFFIX,googleapis.com,Google
DOMAIN-SUFFIX,gstatic.com,Google
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Google/Google.list,Google

# ---- 18) å¹¿å‘Šå…³é”®è¯æœ¬åœ°æ‹¦æˆªï¼ˆå¤‡ä»½ï¼‰----
DOMAIN-KEYWORD,admarvel,REJECT
DOMAIN-KEYWORD,admaster,REJECT
DOMAIN-KEYWORD,adsage,REJECT
DOMAIN-KEYWORD,adsmogo,REJECT
DOMAIN-KEYWORD,adsrvmedia,REJECT
DOMAIN-KEYWORD,adservice,REJECT
DOMAIN-KEYWORD,domob,REJECT
DOMAIN-KEYWORD,duomeng,REJECT
DOMAIN-KEYWORD,guanggao,REJECT
DOMAIN-KEYWORD,lianmeng,REJECT
DOMAIN-KEYWORD,mopub,REJECT
DOMAIN-KEYWORD,omgmta,REJECT
DOMAIN-KEYWORD,openx,REJECT
DOMAIN-KEYWORD,partnerad,REJECT
DOMAIN-KEYWORD,supersonicads,REJECT
DOMAIN-KEYWORD,umeng,REJECT
DOMAIN-KEYWORD,wlmonitor,REJECT
DOMAIN-KEYWORD,zjtoolbar,REJECT
DOMAIN-SUFFIX,doubleclick.net,REJECT
DOMAIN-SUFFIX,appsflyer.com,REJECT
DOMAIN-SUFFIX,mmstat.com,REJECT
DOMAIN-SUFFIX,vungle.com,REJECT

# ---- 19) å›½å†… ----
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/ChinaMax/ChinaMax.list,DIRECT
DOMAIN-SUFFIX,cn,DIRECT
GEOIP,CN,DIRECT

# ---- 20) å…œåº• ----
FINAL,Global

# =====================================
# DNS æŒ‡å®šè§£æ
# =====================================

[Host]
# å›½å†…å¤§å‚
*.taobao.com = server:223.5.5.5
*.tmall.com = server:223.5.5.5
*.jd.com = server:119.29.29.29
*.qq.com = server:119.29.29.29
*.tencent.com = server:119.29.29.29
*.weixin.com = server:119.29.29.29
*.bilibili.com = server:119.29.29.29
*.netease.com = server:119.29.29.29

# Google ç³»
*.google.com = server:8.8.8.8
*.googleapis.com = server:8.8.8.8
*.gstatic.com = server:8.8.8.8
*.youtube.com = server:8.8.8.8
*.googlevideo.com = server:8.8.8.8

# AI æœåŠ¡
*.openai.com = server:8.8.8.8
*.chatgpt.com = server:8.8.8.8
*.anthropic.com = server:8.8.8.8
*.claude.ai = server:8.8.8.8
*.x.ai = server:8.8.8.8
*.grok.com = server:8.8.8.8
*.deepseek.com = server:8.8.8.8
*.perplexity.ai = server:8.8.8.8

# WhatsApp
*.whatsapp.com = server:8.8.8.8
*.whatsapp.net = server:8.8.8.8
*.whatsapp.biz = server:8.8.8.8
*.wa.me = server:8.8.8.8

# ç¤¾äº¤/å¼€å‘å¹³å°
*.twitter.com = server:8.8.8.8
*.x.com = server:8.8.8.8
*.facebook.com = server:8.8.8.8
*.instagram.com = server:8.8.8.8
*.reddit.com = server:8.8.8.8
*.discord.com = server:8.8.8.8
*.github.com = server:8.8.8.8
*.spotify.com = server:8.8.8.8

[URL Rewrite]

[MITM]
hostname = sub.store
